# OpenManus 新增功能规划

## 📋 目录
## 系统概览
远程项目承包平台：自动爬取远程工作机会，通过AI智能分析，人工审核通过后自动投递简历。

### 核心价值链
```
多平台平台 → 爬取机会 → 职能分析评分 → 人工审核(手动改数据库状态) →  自动投递 → 获得订单
```

## 功能模块
### 机会管理模块 (Opportunity Management)

**功能描述**: 自动爬取、智能分析、人工审核、自动投递远程工作机会

**核心子功能**:
- **机会爬取**: Upwork、Toptal、LinkedIn等平台爬虫
- **机会分析**: LLM智能评分、技能匹配度、预期收入评估、风险评估
- **机会投递**: 人工审核机会、自动投递简历
**数据流**:
```
爬虫 → 原始数据 → LLM分析 → 评分分类 → 数据库存储 → 人工审核(手动改数据库状态) → 自动投递
```
**关键指标**:
- 每日爬取数量
- 投递成功率
- 获单率
- 平均项目价值
---


## 核心流程

### 流程1: 机会获取和投递流程

```
1. 定时爬虫启动 (每5秒)
   ↓
2. 爬取多个平台的工作机会 (Upwork/Toptal/LinkedIn)
   ↓
3. 原始数据清洗和标准化
   ↓
4. LLM智能分析 (评分0-100、技能匹配、收入评估、风险评估)
   ↓
5. 保存到数据库
   ↓
6. 人工审核通过(手动改数据库状态)
   ↓
7. 自动投递简历 (生成个性化提案、提交到平台)
   ↓
8. 跟踪投递状态 (等待回复/获得面试/获得订单/被拒绝)
```


## 数据模型

### 核心表结构
#### 3. opportunities 表 (工作机会)
```sql
CREATE TABLE `opportunities` (
    `id` INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
    
    -- 基础抓取信息
    `platform` VARCHAR(20) NOT NULL COMMENT '来源平台: upwork, toptal, linkedin, freelancer',
    `platform_id` VARCHAR(100) UNIQUE NOT NULL COMMENT '原始平台唯一ID，防止重复抓取',
    `title` VARCHAR(255) NOT NULL COMMENT '项目标题',
    `description` TEXT COMMENT '原始项目描述',
    `source_url` VARCHAR(500) NOT NULL COMMENT '项目详情链接',
    
    -- 核心商业指标
    `budget_type` ENUM('fixed', 'hourly') DEFAULT 'fixed' COMMENT '预算类型',
    `budget_min` DECIMAL(10, 2) DEFAULT 0.00 COMMENT '最低预算',
    `budget_max` DECIMAL(10, 2) DEFAULT 0.00 COMMENT '最高预算',
    `client_country` VARCHAR(50) COMMENT '客户国家(避开某些低价区)',
    `client_rating` FLOAT DEFAULT 0.0 COMMENT '客户历史评分',
    
    -- AI 智能决策字段 (赚钱核心)
    `ai_score` TINYINT DEFAULT 0 COMMENT 'AI 综合评分 0-100',
    `ai_match_reason` TEXT COMMENT 'AI 推荐理由/技术匹配点',
    `ai_proposal_draft` TEXT COMMENT 'AI 生成的初稿',
    `skills_required` JSON COMMENT '解析出的技能标签 ["Python", "React"]',
    
    -- 自动化流程控制
    `status` TINYINT NOT NULL DEFAULT 1 
        COMMENT '1:发现任务, 2:AI已评分, 3:人工已审核, 4:投递中, 5:投递成功, 6:投递失败, 7:已获单, 8:忽略/已结束',
    `retry_count` TINYINT DEFAULT 0 COMMENT '投递失败重试次数',
    `error_log` TEXT COMMENT '失败原因记录',
    
    -- 时间线
    `published_at` TIMESTAMP NULL COMMENT '平台发布时间',
    `created_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '本地抓取时间',
    `updated_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    `applied_at` TIMESTAMP NULL COMMENT '实际投递时间',

    -- 索引优化
    INDEX `idx_status_score` (`status`, `ai_score`),
    INDEX `idx_platform` (`platform`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
```

---
## 实施路线

### 阶段1: 核心功能 (Week 1-2)

---

### 阶段2: 优化和部署 (Week 7-8)

**目标**: 性能优化和上线

**任务清单**:
- [ ] 性能优化 (数据库查询优化、API缓存、前端性能优化)
- [ ] 测试 (单元测试、集成测试、用户验收测试)
- [ ] 部署 (生产环境配置、数据库迁移、上线发布)

---

## 技术决策

### 1. 知识库设计
**混合存储方案**:
- **向量数据库** (ChromaDB) - 语义搜索
- **Git仓库** - 完整代码存储
- **数据数据库** (MySQL) - 元数据管理


## 成功指标

### Phase 1: The Oracle (Week 1-2)
- ✅ 每天抓取 50+ 相关职位
- ✅ LLM推荐Top 10评分后保存到数据库，人工审核后申请3-5个
- ✅ 申请回复率 > 20%
- ✅ **关键指标: 接到第一个付费项目($50+)**

### Phase 2: 人工交付 (Week 3-4)
- ✅ 完成3-5个项目
- ✅ 客户满意度 > 4.5/5
- ✅ 累计收入 > $3000
- ✅ 知识库积累 50+ 可复用组件
- ✅ **关键指标: 证明商业模式可行**

### Phase 3: AI辅助 (Week 5-6)
- ✅ AI辅助度 30%
- ✅ 开发效率提升 50%
- ✅ 代码复用率 40%
- ✅ 完成2-3个项目,收入 > $2000

### Phase 4: AI主导 (Week 7-8)
- ✅ AI辅助度 70%
- ✅ 开发效率提升 3倍
- ✅ 可并行处理2-3个项目
- ✅ 月收入突破 $5000
- ✅ **关键指标: 证明可规模化**

---

## 核心原则

### 战略原则
1. **商业优先**: Week 1-2就要接到第一单
2. **人工起步**: 前期100%人工,验证商业模式
3. **渐进AI化**: 基于真实数据逐步自动化
4. **快速反馈**: 每个项目都积累知识资产
5. **可持续**: 边赚钱边优化,降低资金压力

### 实施原则
- **先活下来** (接单赚钱)
- **再活得好** (提高效率)
- **最后活得久** (规模化)
